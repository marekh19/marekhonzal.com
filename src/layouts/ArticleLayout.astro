---
import type { MarkdownHeading } from 'astro'

import ArticleHeader from '@/components/Content/ArticleHeader.astro'
import TableOfContents from '@/components/Content/TableOfContents/TableOfContents.astro'
import ScrollProgressBar from '@/components/ScrollProgressBar.astro'
import PreloadFonts from '@/components/utility/PreloadFonts.astro'
import { defaultSeo } from '@/config/seo'
import type { PostData } from '@/lib/types'

import BaseLayout from './BaseLayout.astro'

type Props = PostData & {
  headings: MarkdownHeading[]
}
const { title, description, headings } = Astro.props
---

<BaseLayout pageTitle={defaultSeo.pageTitle(title)} pageDescription={description}>
  <Fragment slot="head">
    <PreloadFonts type="serif" />
  </Fragment>

  <Fragment slot="beforeContent">
    <ArticleHeader {...Astro.props} className="mt-5" />
  </Fragment>

  <slot />

  <Fragment slot="endOfBody">
    <TableOfContents headings={headings} />
    <ScrollProgressBar />
    <script src="@/scripts/copy-code.ts"></script>
  </Fragment>
</BaseLayout>
