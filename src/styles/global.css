@import 'tailwindcss';
@import './themes/theme-light.css';
@import './themes/theme-dark.css';
@import './fonts.css';
@import './shiki.css';
@import './animation.css';

@plugin 'daisyui' {
  themes: false;
  logs: false;
}

@plugin '@tailwindcss/typography';

@theme {
  /* Font */
  --font-sans:
    'Open Sans', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
    Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-serif: 'Lora', ui-serif, Georgia, Cambria, 'Times New Roman', serif;

  /* Animation */
  --animate-slide-in: slide-in-left 800ms cubic-bezier(0.2, 0.7, 0.2, 1) both;
  --animate-underline-wipe: underline-wipe 800ms ease-in-out 0ms 1 both;
  --ease-springy: cubic-bezier(0.34, 1.56, 0.64, 1);

  /* Aspect ratio */
  --aspect-og: 1200 / 630;
}

:root {
  --header-h: 4.5rem;
  --toc-w: 17rem;
}

html {
  @apply bg-base-200 text-base-content scroll-smooth;
  scrollbar-gutter: stable;
}

@custom-variant prose-inline-code (:root & :where(code):not(pre>code));

@layer components {
  /* Copy button in markdown code block */
  .code-block {
    @apply relative;

    & > button {
      @apply btn btn-soft btn-xs absolute top-0.5 right-0.5;
    }
  }

  /* Custom link style with expanding background */
  .link-gradient {
    --bg-link: oklch(from var(--color-primary) l c h / 0.4);

    background-image: linear-gradient(to right, var(--bg-link), var(--bg-link));
    background-size: 100% 20%;
    background-repeat: no-repeat;
    background-position: bottom;

    &:hover {
      background-size: 100% 85%;
    }

    @media (prefers-reduced-motion: no-preference) {
      transition: background-size 0.35s;
      transition-timing-function: cubic-bezier(0.25, 0.1, 0, 2.05);
    }

    @media (prefers-reduced-motion: reduce) {
      &:hover {
        background-size: 100% 20%; /* disables hover effect */
      }
    }
  }
}

@layer utilities {
  .link-outline {
    @apply focus-visible:outline-primary focus-visible:outline-2 focus-visible:outline-offset-2;

    &.link-outline-rounded {
      @apply focus-visible:rounded-sm;
    }
  }

  .link-outline-accent {
    @apply focus-visible:outline-accent focus-visible:outline-2 focus-visible:outline-offset-2;

    &.link-outline-rounded {
      @apply focus-visible:rounded-sm;
    }
  }

  .link-outline-daisy {
    @apply focus:outline-primary focus:rounded-sm focus:outline-offset-2;
  }

  .bg-primary-mix {
    background: color-mix(
      in oklch,
      var(--color-primary) calc(var(--mix) * 100%),
      var(--color-base-200) calc(100% - var(--mix) * 100%)
    );
  }

  .mix-1 {
    --mix: 1;
  }
  .mix-6-7 {
    --mix: 0.857142857;
  }
  .mix-5-7 {
    --mix: 0.714285714;
  }
  .mix-4-7 {
    --mix: 0.571428571;
  }
  .mix-3-7 {
    --mix: 0.428571429;
  }
  .mix-2-7 {
    --mix: 0.285714286;
  }
  .mix-1-7 {
    --mix: 0.142857143;
  }
}
