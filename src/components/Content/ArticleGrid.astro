---
import ArticleCard from '@/components/Content/ArticleCard.astro'
import { ROUTES } from '@/config/routes'
import type { Post } from '@/lib/types'

import ContentGrid from './ContentGrid/ContentGrid.astro'

const NUM_PRIORITY_IMAGES = 2

type Props = {
  posts: readonly Post[]
  className?: string
  isAboveFold?: boolean
}

const { posts, className, isAboveFold = false } = Astro.props
---

<ContentGrid type="article" className={className}>
  {
    posts.map((post, index) => (
      <ArticleCard
        title={post.data.title}
        description={post.data.description}
        targetUrl={ROUTES.blog.post(post.id)}
        date={post.data.date}
        thumbnail={post.data.thumbnail}
        tags={post.data.tags}
        isPriorityImage={isAboveFold && index < NUM_PRIORITY_IMAGES}
      />
    ))
  }
</ContentGrid>
