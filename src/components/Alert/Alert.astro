---
import { Icon } from 'astro-icon/components'
import { cn } from '@/lib/utils/cn'
import {
  alertRootVariants,
  alertTitleVariants,
  alertIconVariants,
  defaultTitles,
  iconIntentMap,
  type AlertVariant,
} from './alertVariants'

type Props = {
  intent?: AlertVariant
  title?: string
  className?: string
}

const { intent: intentProp, title: titleProp, className } = Astro.props

const intent = intentProp ?? 'info'
const title = titleProp ?? defaultTitles[intent]
const iconName = iconIntentMap[intent]
---

<div class={cn(alertRootVariants({ intent }), className)}>
  <div class="mb-3 flex items-start gap-3">
    <span class={alertIconVariants({ intent })}>
      <Icon name={iconName} />
    </span>
    <div class={alertTitleVariants({ intent })}>
      {title}
    </div>
  </div>
  <p>
    <slot />
  </p>
</div>
